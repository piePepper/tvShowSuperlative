(this["webpackJsonptv-show-superlative"]=this["webpackJsonptv-show-superlative"]||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/NoImageAvailableLarge.c8f94494.jpg"},38:function(e,t,a){},41:function(e,t,a){e.exports=a(69)},46:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(39),i=a.n(s),o=(a(46),a(3)),c=a(4),l=a(6),u=a(5),m=a(13),h=a(1),p=a(17),d=a(20),f=a.n(d);a(47);f.a.initializeApp({apiKey:"AIzaSyBtt_2ViryDprk5dNwiZzqWYaV8fHTd_K0",authDomain:"tvshowsuperlatives.firebaseapp.com",databaseURL:"https://tvshowsuperlatives.firebaseio.com",projectId:"tvshowsuperlatives",storageBucket:"tvshowsuperlatives.appspot.com",messagingSenderId:"737126203732",appId:"1:737126203732:web:6d32c3814e4e2de65f08c1"});var v=f.a,y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).componentDidMount=function(){v.database().ref().on("value",(function(t){var a=[],n=t.val();for(var r in n)r.length>14&&a.push({key:r,name:n[r]});e.setState({dbReturn:a})}))},e.state={dbReturn:[]},e}return Object(c.a)(a,[{key:"removeList",value:function(e){v.database().ref().child(e).remove()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"firebase-data"},r.a.createElement("h1",null,"User Lists"),r.a.createElement("ul",null,this.state.dbReturn.map((function(t){return r.a.createElement("li",{key:t.key},r.a.createElement(m.b,{to:"/list/".concat(t.key)},r.a.createElement("p",null,t.name.listName),r.a.createElement("button",{className:"listDelete",onClick:function(){e.removeList(t.key)}},"X")))}))))}}]),a}(n.Component),b=a(16),E=a.n(b),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setDisplayArray=function(){n.setState({displayArray:n.props.data})},n.state={displayArray:[]},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.data!==this.props.data&&this.setDisplayArray()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,0!==this.state.displayArray.length?this.state.displayArray.map((function(e){return r.a.createElement("div",{className:"movieContainer"},r.a.createElement(m.b,{to:"/show/".concat(e.id)},r.a.createElement("img",{src:null===e.image?E.a:e.image.medium,alt:e.name}),r.a.createElement("h4",{className:"bodyCardRating"},e.rating.average),r.a.createElement("h3",{className:"bodyCardTitle"},e.name)))})):r.a.createElement("h2",null,"No results to show for combination of search and/or filters."))}}]),a}(n.Component),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).createFilterArrays=function(t){var a=[];e.props.chosenFilters.forEach((function(e,n){var r=[],s=Object(p.a)(e,2),i=s[0],o=s[1];void 0===o?t.forEach((function(e){null===e[i]||void 0===e[i]||(e[i].constructor===Array?e[i].forEach((function(e){r.includes(e)||r.push(e)})):r.includes(e[i])||r.push(e[i]))})):t.forEach((function(e){null===e[i]||void 0===e[i]||null===e[i][o]||void 0===e[i][o]||(e[i][o].constructor===Array?e[i][o].forEach((function(e){r.includes(e)||r.push(e)})):r.includes(e[i][o])||r.push(e[i][o]))})),a.push([r.sort(),[i],[o]])})),e.setState({filters:a})},e.dropHandler=function(t){var a=e.state.returnFilter;""===t.target.value?a[t.target.id][0]="":a[t.target.id][0]=t.target.value,e.setState({returnFilter:a},(function(){return e.props.bringItOnBack(e.state.returnFilter)}))},e.searchHandler=function(t){e.setState({searchBar:t.target.value})},e.sortHandler=function(t){e.props.sortPass(t.target.value.split(","))},e.sideBarData=function(t){t.preventDefault(),e.props.searchPass(e.state.searchBar)},e.state={searchBar:"",filters:[],returnFilter:[["","language"],["","genres"],["","status"],["","network","name"]],sortArray:[["A-Z","name","1"],["Z-A","name","-1"],["Highest Rated","rating","1"],["Lowest Rated","rating","-1"]]},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.apiData!==this.props.apiData&&this.createFilterArrays(this.props.apiData)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"queryContainer"},r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.searchHandler,className:"searchBox"}),r.a.createElement("button",{className:"sideBarSearchBtn",onClick:this.sideBarData},"Search"," ")),r.a.createElement("form",{className:"criteriaContainer"},this.state.filters.map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"languageContainer"},t[1]),r.a.createElement("select",{id:a,name:t[1],onChange:e.dropHandler},r.a.createElement("option",{value:""}),e.state.filters[a][0].map((function(e){return r.a.createElement("option",{value:e},e)}))))})),r.a.createElement("label",{className:"sortByContainer"},"Sort By"),r.a.createElement("select",{id:"sortBy",name:"sortBy",onChange:this.sortHandler},r.a.createElement("option",{value:""}),this.state.sortArray.map((function(e){return r.a.createElement("option",{value:[e[1],e[2]]},e[0])})))))}}]),a}(n.Component),A=a(11),k=a.n(A),D=(a(38),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setSearch=function(e){n.setState({query:e},(function(){return n.apiHandler()}))},n.setFilterArray=function(e){var t=e.filter((function(e){if(""!==e[0])return e}));n.setState({filterArray:t},(function(){return n.filterData()}))},n.ratingSort=function(e){var t=n.state.displayArray;t.sort((function(t,a){return(a.rating.average>t.rating.average?1:-1)*e})),n.setState({displayArray:t})},n.nameSort=function(e){var t=n.state.displayArray;t.sort((function(t,a){return(t.name.toLowerCase()>a.name.toLowerCase()?1:-1)*e})),n.setState({displayArray:t})},n.sortFunc=function(e){"name"===e[0]?n.nameSort(e[1]):n.ratingSort(e[1])},n.state={query:"",chosenFilters:[["language"],["genres"],["status"],["network","name"]],apiData:[],filterArray:[],displayArray:[]},n}return Object(c.a)(a,[{key:"apiHandler",value:function(){var e=this;""===this.state.query?k()({url:"https://api.tvmaze.com/shows"}).then((function(t){e.setState({apiData:t.data,displayArray:t.data})})):k()({url:"http://api.tvmaze.com/search/shows?q=".concat(this.state.query)}).then((function(t){e.setState({apiData:t.data.map((function(e){return e.show})),displayArray:t.data.map((function(e){return e.show}))})}))}},{key:"componentDidMount",value:function(){this.apiHandler()}},{key:"filterData",value:function(){var e=this.state.apiData;this.state.filterArray.forEach((function(t){var a=Object(p.a)(t,3),n=a[0],r=a[1],s=a[2];e=e.filter((function(e){if(void 0!==s){if(null===e[r]||void 0===e[r]||null===e[r][s]||void 0===e[r][s]);else if(e[r][s].includes(n))return e}else if(null!==e[r]&&void 0!==e[r]&&e[r].includes(n))return e}))})),this.setState({displayArray:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"showGeneratorContainer"},r.a.createElement("div",{className:"sideBarContainer"},r.a.createElement(w,{chosenFilters:this.state.chosenFilters,apiData:this.state.apiData,bringItOnBack:this.setFilterArray,searchPass:this.setSearch,sortPass:this.sortFunc}),r.a.createElement(y,null)),r.a.createElement("div",{className:"cardDisplayContainer"},r.a.createElement(g,{data:this.state.displayArray})))}}]),a}(n.Component)),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).componentDidMount=function(){v.database().ref().on("value",(function(t){var a=[],n=t.val();for(var r in n)r.length>14&&a.push({key:r,name:n[r]});e.setState({dbReturn:a})}))},e.setNewShow=function(e){e.preventDefault();var t=v.database().ref(),a=e.target.getAttribute("path"),n=e.target.getAttribute("showid");t.child(a).child("shows").child("".concat(n)).update({counter:0})},e.state={dbReturn:[]},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"firebase-data"},r.a.createElement("h1",null,"User Lists"),r.a.createElement("ul",null,this.state.dbReturn.map((function(t){return r.a.createElement("button",{key:t.key,path:t.key,showid:parseInt(e.props.id),onClick:e.setNewShow,className:"addToListBtn"},"Add to ",t.name.listName)}))))}}]),a}(n.Component),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={apiData:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;k()({url:"https://api.tvmaze.com/shows/"+this.props.match.params.id}).then((function(t){e.setState({apiData:t.data})}))}},{key:"render",value:function(){var e=this.state.apiData;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tvShowCard"},r.a.createElement("div",{className:"showCardContent"},r.a.createElement("h1",{className:"showTitle"},e.name),r.a.createElement("ul",null,r.a.createElement("li",null,e.network&&e.network.name),r.a.createElement("li",null,e.country),r.a.createElement("li",null,e.genres),r.a.createElement("li",null,e.summary&&e.summary.replace(/(<([^>]+)>)/gi,"")))),r.a.createElement("img",{src:e.image&&e.image.medium,alt:e.name,className:"tvShowCardImg"})),r.a.createElement("div",{className:"listBtns"},r.a.createElement(N,{id:this.props.match.params.id})))}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).sortArray=function(){var t=[],a=e.state.displayListInfo.shows;for(var n in a)t.push({showID:parseInt(n),counter:a[n].counter});var r=t.sort((function(e,t){return t.counter-e.counter})).map((function(e){return e.showID}));e.setState({arrayWithShowIDs:r})},e.counterFunc=function(t){var a=v.database().ref(e.props.match.params.listid).child("shows"),n=t.target.getAttribute("showid"),r=parseInt(t.target.value),s=e.state.displayListInfo.shows[n].counter;a.child(n).update({counter:s+r}),e.sortArray()},e.createUserListDisplay=function(){var t=[];e.state.arrayWithShowIDs.forEach((function(e){t.push(k()({url:"https://api.tvmaze.com/shows/".concat(e)}))})),Promise.all(t).then((function(t){var a=t.map((function(e){return e.data}));e.setState({displayArray:a})}))},e.state={displayListInfo:{},displayArray:[],arrayWithShowIDs:[],sortedArray:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.database().ref(this.props.match.params.listid).on("value",(function(t){var a=t.val(),n=[];for(var r in a.shows)n.push(parseInt(r));e.setState({displayListInfo:a}),e.sortArray(),e.createUserListDisplay()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.displayArray.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"userListContainer"},r.a.createElement("img",{className:"userListImage",src:null===t.image?E.a:t.image.medium,alt:t.name}),r.a.createElement("h4",{className:"userCardRating"},t.rating.average),r.a.createElement("h3",{className:"userCardTitle"},t.name),r.a.createElement("button",{onClick:e.counterFunc,showid:t.id,value:1,className:"upVoteBtn"}," UpVote "),r.a.createElement("button",{onClick:e.counterFunc,showid:t.id,value:-1,className:"downVoteBtn"}," DownVote ")))})))}}]),a}(n.Component),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getListNameThenAddToDatabase=function(){var e={listName:prompt("Enter List Name"),shows:[]};v.database().ref().push(e)},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{basename:"/tvShowSuperlative"},r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",{className:"mainTitle"}," PiePepper"),r.a.createElement("button",{onClick:this.getListNameThenAddToDatabase,className:"createListBtn"},"Create List")),r.a.createElement(h.a,{exact:!0,path:"/",component:D}),r.a.createElement(h.a,{path:"/show/:id",component:S}),r.a.createElement(h.a,{path:"/list/:listid",component:C})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.4878e8c1.chunk.js.map