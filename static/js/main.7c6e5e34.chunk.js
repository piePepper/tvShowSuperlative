(this["webpackJsonptv-show-superlative"]=this["webpackJsonptv-show-superlative"]||[]).push([[0],{101:function(e,t,a){},149:function(e,t,a){e.exports=a(452)},153:function(e,t,a){},452:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(24),i=a.n(s),o=(a(153),a(7)),c=a(8),l=a(10),u=a(9),m=a(34),h=a(3),p=a(58),d=a(83),f=a.n(d);a(154);f.a.initializeApp({apiKey:"AIzaSyBtt_2ViryDprk5dNwiZzqWYaV8fHTd_K0",authDomain:"tvshowsuperlatives.firebaseapp.com",databaseURL:"https://tvshowsuperlatives.firebaseio.com",projectId:"tvshowsuperlatives",storageBucket:"tvshowsuperlatives.appspot.com",messagingSenderId:"737126203732",appId:"1:737126203732:web:6d32c3814e4e2de65f08c1"});var v=f.a,y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).componentDidMount=function(){v.database().ref().on("value",(function(t){var a=[],r=t.val();for(var n in r)n.length>14&&a.push({key:n,name:r[n]});e.setState({dbReturn:a})}))},e.state={dbReturn:[]},e}return Object(c.a)(a,[{key:"removeList",value:function(e){v.database().ref().child(e).remove()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"firebase-data"},n.a.createElement("h1",null,"User Lists"),n.a.createElement("ul",null,this.state.dbReturn.map((function(t){return n.a.createElement("li",{key:t.key},n.a.createElement(m.b,{to:"/list/".concat(t.key)},n.a.createElement("p",null,t.name.listName),n.a.createElement("button",{onClick:function(){e.removeList(t.key)}},"X")))}))))}}]),a}(r.Component),b=a(57),g=a.n(b),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).setDisplayArray=function(){r.setState({displayArray:r.props.data})},r.state={displayArray:[]},r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.data!==this.props.data&&this.setDisplayArray()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,0!==this.state.displayArray.length?this.state.displayArray.map((function(e){return n.a.createElement("div",{className:"movieContainer"},n.a.createElement(m.b,{to:"/show/".concat(e.id)},n.a.createElement("img",{src:null===e.image?g.a:e.image.medium,alt:e.name}),n.a.createElement("h4",{className:"bodyCardRating"},e.rating.average),n.a.createElement("h3",{className:"bodyCardTitle"},e.name)))})):n.a.createElement("h2",null,"No results to show for combination of search and/or filters."))}}]),a}(r.Component),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).createFilterArrays=function(t){var a=[];e.props.chosenFilters.forEach((function(e,r){var n=[],s=Object(p.a)(e,2),i=s[0],o=s[1];void 0===o?t.forEach((function(e){null===e[i]||void 0===e[i]||(e[i].constructor===Array?e[i].forEach((function(e){n.includes(e)||n.push(e)})):n.includes(e[i])||n.push(e[i]))})):t.forEach((function(e){null===e[i]||void 0===e[i]||null===e[i][o]||void 0===e[i][o]||(e[i][o].constructor===Array?e[i][o].forEach((function(e){n.includes(e)||n.push(e)})):n.includes(e[i][o])||n.push(e[i][o]))})),a.push([n.sort(),[i],[o]])})),e.setState({filters:a})},e.dropHandler=function(t){var a=e.state.returnFilter;""===t.target.value?a[t.target.id][0]="":a[t.target.id][0]=t.target.value,e.setState({returnFilter:a},(function(){return e.props.bringItOnBack(e.state.returnFilter)}))},e.searchHandler=function(t){e.setState({searchBar:t.target.value})},e.sortHandler=function(t){e.props.sortPass(t.target.value.split(","))},e.sideBarData=function(t){t.preventDefault(),e.props.searchPass(e.state.searchBar)},e.state={searchBar:"",filters:[],returnFilter:[["","language"],["","genres"],["","status"],["","network","name"]],sortArray:[["A-Z","name","1"],["Z-A","name","-1"],["Highest Rated","rating","1"],["Lowest Rated","rating","-1"]]},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.apiData!==this.props.apiData&&this.createFilterArrays(this.props.apiData)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"queryContainer"},n.a.createElement("form",null,n.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.searchHandler,className:"searchBox"}),n.a.createElement("button",{className:"sideBarSearchBtn",onClick:this.sideBarData},"Search ")),n.a.createElement("form",{className:"criteriaContainer"},this.state.filters.map((function(t,a){return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"languageContainer"},t[1]),n.a.createElement("select",{id:a,name:t[1],onChange:e.dropHandler},n.a.createElement("option",{value:""}),e.state.filters[a][0].map((function(e){return n.a.createElement("option",{value:e},e)}))))})),n.a.createElement("label",{className:"sortByContainer"},"Sort By"),n.a.createElement("select",{id:"sortBy",name:"sortBy",onChange:this.sortHandler},n.a.createElement("option",{value:""}),this.state.sortArray.map((function(e){return n.a.createElement("option",{value:[e[1],e[2]]},e[0])})))))}}]),a}(r.Component),A=a(35),k=a.n(A),D=(a(101),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).setSearch=function(e){r.setState({query:e},(function(){return r.apiHandler()}))},r.setFilterArray=function(e){var t=e.filter((function(e){if(""!==e[0])return e}));r.setState({filterArray:t},(function(){return r.filterData()}))},r.ratingSort=function(e){var t=r.state.displayArray;t.sort((function(t,a){return(a.rating.average>t.rating.average?1:-1)*e})),r.setState({displayArray:t})},r.nameSort=function(e){var t=r.state.displayArray;t.sort((function(t,a){return(t.name.toLowerCase()>a.name.toLowerCase()?1:-1)*e})),r.setState({displayArray:t})},r.sortFunc=function(e){"name"===e[0]?r.nameSort(e[1]):r.ratingSort(e[1])},r.state={query:"",chosenFilters:[["language"],["genres"],["status"],["network","name"]],apiData:[],filterArray:[],displayArray:[]},r}return Object(c.a)(a,[{key:"apiHandler",value:function(){var e=this;""===this.state.query?k()({url:"https://api.tvmaze.com/shows"}).then((function(t){e.setState({apiData:t.data,displayArray:t.data})})):k()({url:"http://api.tvmaze.com/search/shows?q=".concat(this.state.query)}).then((function(t){e.setState({apiData:t.data.map((function(e){return e.show})),displayArray:t.data.map((function(e){return e.show}))})}))}},{key:"componentDidMount",value:function(){this.apiHandler()}},{key:"filterData",value:function(){var e=this.state.apiData;this.state.filterArray.forEach((function(t){var a=Object(p.a)(t,3),r=a[0],n=a[1],s=a[2];e=e.filter((function(e){if(void 0!==s){if(null===e[n]||void 0===e[n]||null===e[n][s]||void 0===e[n][s]);else if(e[n][s].includes(r))return e}else if(null!==e[n]&&void 0!==e[n]&&e[n].includes(r))return e}))})),this.setState({displayArray:e})}},{key:"render",value:function(){return n.a.createElement("div",{className:"showGeneratorContainer"},n.a.createElement("div",{className:"sideBarContainer"},n.a.createElement(w,{chosenFilters:this.state.chosenFilters,apiData:this.state.apiData,bringItOnBack:this.setFilterArray,searchPass:this.setSearch,sortPass:this.sortFunc}),n.a.createElement(y,null)),n.a.createElement("div",{className:"cardDisplayContainer"},n.a.createElement(E,{data:this.state.displayArray})))}}]),a}(r.Component)),S=(a(176),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).componentDidMount=function(){v.database().ref().on("value",(function(t){var a=[],r=t.val();for(var n in r)n.length>14&&a.push({key:n,name:r[n]});e.setState({dbReturn:a})}))},e.setNewShow=function(e){e.preventDefault();var t=v.database().ref(),a=e.target.getAttribute("path"),r=e.target.getAttribute("showid");t.child(a).child("shows").child("".concat(r)).update({counter:0})},e.state={dbReturn:[]},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"firebase-data"},n.a.createElement("h1",null,"User Lists"),n.a.createElement("ul",null,this.state.dbReturn.map((function(t){return n.a.createElement("button",{key:t.key,path:t.key,showid:parseInt(e.props.id),onClick:e.setNewShow},"Add to ",t.name.listName)}))))}}]),a}(r.Component)),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={apiData:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;k()({url:"https://api.tvmaze.com/shows/"+this.props.match.params.id}).then((function(t){e.setState({apiData:t.data})}))}},{key:"render",value:function(){var e=this.state.apiData;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"tvShowCard"},n.a.createElement("div",{className:"showCardContent"},n.a.createElement("h1",{className:"showTitle"},e.name),n.a.createElement("ul",null,n.a.createElement("li",null,e.network&&e.network.name),n.a.createElement("li",null,e.country),n.a.createElement("li",null,e.genres),n.a.createElement("li",null,e.summary&&e.summary.replace(/(<([^>]+)>)/gi,"")))),n.a.createElement("img",{src:e.image&&e.image.medium,alt:e.name,className:"tvShowCardImg"})),n.a.createElement("div",{className:"listBtns"},n.a.createElement(S,{id:this.props.match.params.id})))}}]),a}(r.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).sortArray=function(){var t=[],a=e.state.displayListInfo.shows;for(var r in a)t.push({showID:parseInt(r),counter:a[r].counter});var n=t.sort((function(e,t){return t.counter-e.counter})).map((function(e){return e.showID}));e.setState({arrayWithShowIDs:n})},e.counterFunc=function(t){var a=v.database().ref(e.props.match.params.listid).child("shows"),r=t.target.getAttribute("showid"),n=parseInt(t.target.value),s=e.state.displayListInfo.shows[r].counter;a.child(r).update({counter:s+n}),e.sortArray()},e.createUserListDisplay=function(){var t=[];e.state.arrayWithShowIDs.forEach((function(e){t.push(k()({url:"https://api.tvmaze.com/shows/".concat(e)}))})),Promise.all(t).then((function(t){var a=t.map((function(e){return e.data}));e.setState({displayArray:a})}))},e.state={displayListInfo:{},displayArray:[],arrayWithShowIDs:[],sortedArray:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.database().ref(this.props.match.params.listid).on("value",(function(t){var a=t.val(),r=[];for(var n in a.shows)r.push(parseInt(n));e.setState({displayListInfo:a}),e.sortArray(),e.createUserListDisplay()}))}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,this.state.displayArray.map((function(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{className:"userListImage",src:null===t.image?g.a:t.image.medium,alt:t.name}),n.a.createElement("h4",{className:"bodyCardRating"},t.rating.average),n.a.createElement("h3",{className:"bodyCardTitle"},t.name),n.a.createElement("button",{onClick:e.counterFunc,showid:t.id,value:1}," UpVote "),n.a.createElement("button",{onClick:e.counterFunc,showid:t.id,value:-1}," DownVote "))})))}}]),a}(r.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).getListNameThenAddToDatabase=function(){var e={listName:prompt("Enter List Name"),shows:[]};v.database().ref().push(e)},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement(m.a,{basename:"/tvShowSuperlative"},n.a.createElement("div",{className:"App"},n.a.createElement("header",null,n.a.createElement("h1",{className:"mainTitle"}," PiePepper"),n.a.createElement("button",{onClick:this.getListNameThenAddToDatabase,className:"createListBtn"},"Create List")),n.a.createElement(h.a,{exact:!0,path:"/",component:D}),n.a.createElement(h.a,{path:"/show/:id",component:j}),n.a.createElement(h.a,{path:"/list/:listid",component:C})))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a.p+"static/media/NoImageAvailableLarge.c8f94494.jpg"}},[[149,1,2]]]);
//# sourceMappingURL=main.7c6e5e34.chunk.js.map